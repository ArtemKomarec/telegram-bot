{"version":3,"file":"index.js","names":["express","require","constants","CoinMarketCapService","TelegramBot","messageController","app","use","json","urlencoded","extended","bot","polling","module","exports","availableСurrencies","onText","convertCurrencyHandler","getJokeHandler","getDropsTabProfileHandler","getTopNews","getMemeHandler","on","newChatMember","leftChatMember","newMessageHandler","console","log","listen","PORT","data","getAllSlugsRequest","getAllSlugs"],"sources":["../src/index.js"],"sourcesContent":["const express = require(\"express\");\n\nconst constants = require(\"./constants\");\nconst CoinMarketCapService = require(\"./services/coin-market-cap\");\nconst TelegramBot = require(\"node-telegram-bot-api\");\nconst messageController = require(\"./controllers/message\");\n// import cron from 'node-cron'\n\nconst app = express();\n\napp.use(\n\texpress.json(),\n\texpress.urlencoded({\n\t\textended: true,\n\t})\n);\n\n// const notes = [{\n// \tchatId: -895694621,\n// \ttime: '15:11 12:18',\n// \ttext: 'отдыхать'\n// }];\n\n// const task = cron.schedule('*/1 * * * *', () => {\n// \tnotes.foreach((note) =>{\n// \t\t  bot.sendMessage(note['chatId'], 'Напоминаю, что вы должны: '+ note['text'] + ' сейчас.');\n// \t})\n// \tconsole.log('running a task every minute');\n// });\n\nconst bot = new TelegramBot(\"5823108134:AAHy0ykLMcpgyV77M-rqyTty0bwzT6eBZRA\", {\n\tpolling: true,\n});\nmodule.exports.bot = bot;\nlet availableСurrencies = [];\n\nbot.onText(\n\t/convert (?<value>.+) (?<curr>.+)/,\n\tmessageController.convertCurrencyHandler\n);\nbot.onText(/\\/joke/, messageController.getJokeHandler);\nbot.onText(/\\/fund/, messageController.getDropsTabProfileHandler);\nbot.onText(/\\/news/, messageController.getTopNews);\nbot.onText(/\\/meme/, messageController.getMemeHandler);\n\nbot.on(\"new_chat_members\", messageController.newChatMember);\nbot.on(\"left_chat_member\", messageController.leftChatMember);\nbot.on(\"message\", messageController.newMessageHandler);\nbot.on(\"polling_error\", console.log);\n\napp.listen(constants.PORT, async () => {\n\tconsole.log(`Server running on port ${constants.PORT}`);\n\tconst data = await CoinMarketCapService.getAllSlugsRequest();\n\tavailableСurrencies = CoinMarketCapService.getAllSlugs();\n\texports.availableСurrencies = availableСurrencies;\n\tconsole.log(availableСurrencies);\n});\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAElC,MAAMC,SAAS,GAAGD,OAAO,CAAC,aAAa,CAAC;AACxC,MAAME,oBAAoB,GAAGF,OAAO,CAAC,4BAA4B,CAAC;AAClE,MAAMG,WAAW,GAAGH,OAAO,CAAC,uBAAuB,CAAC;AACpD,MAAMI,iBAAiB,GAAGJ,OAAO,CAAC,uBAAuB,CAAC;AAC1D;;AAEA,MAAMK,GAAG,GAAGN,OAAO,EAAE;AAErBM,GAAG,CAACC,GAAG,CACNP,OAAO,CAACQ,IAAI,EAAE,EACdR,OAAO,CAACS,UAAU,CAAC;EAClBC,QAAQ,EAAE;AACX,CAAC,CAAC,CACF;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,GAAG,GAAG,IAAIP,WAAW,CAAC,gDAAgD,EAAE;EAC7EQ,OAAO,EAAE;AACV,CAAC,CAAC;AACFC,MAAM,CAACC,OAAO,CAACH,GAAG,GAAGA,GAAG;AACxB,IAAII,mBAAmB,GAAG,EAAE;AAE5BJ,GAAG,CAACK,MAAM,CACT,kCAAkC,EAClCX,iBAAiB,CAACY,sBAAsB,CACxC;AACDN,GAAG,CAACK,MAAM,CAAC,QAAQ,EAAEX,iBAAiB,CAACa,cAAc,CAAC;AACtDP,GAAG,CAACK,MAAM,CAAC,QAAQ,EAAEX,iBAAiB,CAACc,yBAAyB,CAAC;AACjER,GAAG,CAACK,MAAM,CAAC,QAAQ,EAAEX,iBAAiB,CAACe,UAAU,CAAC;AAClDT,GAAG,CAACK,MAAM,CAAC,QAAQ,EAAEX,iBAAiB,CAACgB,cAAc,CAAC;AAEtDV,GAAG,CAACW,EAAE,CAAC,kBAAkB,EAAEjB,iBAAiB,CAACkB,aAAa,CAAC;AAC3DZ,GAAG,CAACW,EAAE,CAAC,kBAAkB,EAAEjB,iBAAiB,CAACmB,cAAc,CAAC;AAC5Db,GAAG,CAACW,EAAE,CAAC,SAAS,EAAEjB,iBAAiB,CAACoB,iBAAiB,CAAC;AACtDd,GAAG,CAACW,EAAE,CAAC,eAAe,EAAEI,OAAO,CAACC,GAAG,CAAC;AAEpCrB,GAAG,CAACsB,MAAM,CAAC1B,SAAS,CAAC2B,IAAI,EAAE,YAAY;EACtCH,OAAO,CAACC,GAAG,CAAE,0BAAyBzB,SAAS,CAAC2B,IAAK,EAAC,CAAC;EACvD,MAAMC,IAAI,GAAG,MAAM3B,oBAAoB,CAAC4B,kBAAkB,EAAE;EAC5DhB,mBAAmB,GAAGZ,oBAAoB,CAAC6B,WAAW,EAAE;EACxDlB,OAAO,CAACC,mBAAmB,GAAGA,mBAAmB;EACjDW,OAAO,CAACC,GAAG,CAACZ,mBAAmB,CAAC;AACjC,CAAC,CAAC"}