{"version":3,"file":"coin-market-cap.js","names":["CoinMarketCap","require","constants","allSlugsCurr","getExchangeRatesBySlugs","currencySlugs","client","COIN_MARKET_CAP_API_KEY","res","getQuotes","symbol","rates","Object","values","data","map","rate","tokenPrice","Number","quote","USD","price","toFixed","String","blockhain","platform","name","percentChange","percent_change_24h","info","currency","value","dayChange","module","exports","getAllSlugsRequest","getTickers","limit","slug","getAllSlugs","getExchangeRateBySlug","currencySlug","toUpperCase"],"sources":["../../src/services/coin-market-cap.js"],"sourcesContent":["const CoinMarketCap = require(\"coinmarketcap-api\");\nconst constants = require(\"../constants\");\n\nlet allSlugsCurr = [];\n\nconst getExchangeRatesBySlugs = async (currencySlugs) => {\n  const client = new CoinMarketCap(constants.COIN_MARKET_CAP_API_KEY);\n  const res = await client.getQuotes({ symbol: [...currencySlugs] });\n  const rates = Object.values(res.data).map((rate) => {\n    let tokenPrice = Number(rate.quote.USD.price).toFixed(3);\n    tokenPrice = String(tokenPrice) + \" \" + \"Usdt\";\n\n    let blockhain = '';\n    if (rate.platform) {\n      blockhain = rate.platform.name;\n    } else {\n      blockhain = rate.name;\n    }\n    let percentChange = Number(rate.quote.USD.percent_change_24h).toFixed(2);\n    percentChange = String(percentChange) + \" \" + \"%\";\n\n    return {\n      info: rate,\n      currency: rate.name,\n      value: tokenPrice,\n      blockhain: blockhain,\n      dayChange: percentChange,\n    };\n  });\n\n  return rates;\n};\n\nmodule.exports.getExchangeRatesBySlugs = getExchangeRatesBySlugs;\n\nconst getAllSlugsRequest = async () => {\n  const client = new CoinMarketCap(constants.COIN_MARKET_CAP_API_KEY);\n  const res = await client.getTickers({ limit: 5000 });\n  // струпи -> пасхалочка ( ОЧКА )\n  allSlugsCurr = Object.values(res.data).map((slug) => {\n    return {\n      slug: slug.symbol,\n    };\n  });\n\n  return allSlugsCurr;\n};\n\nmodule.exports.getAllSlugsRequest = getAllSlugsRequest;\n\nconst getAllSlugs = () => allSlugsCurr;\nmodule.exports.getAllSlugs = getAllSlugs;\n\nconst getExchangeRateBySlug = async (slug) => {\n  const client = new CoinMarketCap(constants.COIN_MARKET_CAP_API_KEY);\n  const currencySlug = slug.toUpperCase();\n  const res = await client.getQuotes({ symbol: currencySlug })\n  const price = (res.data[currencySlug].quote.USD.price).toFixed(3);\n  return price;\n};\nmodule.exports.getExchangeRateBySlug = getExchangeRateBySlug;\n"],"mappings":"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"}