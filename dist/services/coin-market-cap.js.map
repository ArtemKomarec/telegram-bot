{"version":3,"file":"coin-market-cap.js","names":["CoinMarketCap","require","constants","allSlugsCurr","getExchangeRatesBySlugs","currencySlugs","client","COIN_MARKET_CAP_API_KEY","res","getQuotes","symbol","rates","Object","values","data","map","rate","tokenPrice","Number","quote","USD","price","toFixed","String","blockhain","platform","name","percentChange","percent_change_24h","info","currency","value","dayChange","module","exports","getAllSlugsRequest","getTickers","limit","slug","getAllSlugs","getExchangeRateBySlug","currencySlug","toUpperCase"],"sources":["../../src/services/coin-market-cap.js"],"sourcesContent":["const CoinMarketCap = require(\"coinmarketcap-api\");\nconst constants = require(\"../constants\");\n\nlet allSlugsCurr = [];\n\nconst getExchangeRatesBySlugs = async (currencySlugs) => {\n\tconst client = new CoinMarketCap(constants.COIN_MARKET_CAP_API_KEY);\n\tconst res = await client.getQuotes({ symbol: [...currencySlugs] });\n\tconst rates = Object.values(res.data).map((rate) => {\n\t\tlet tokenPrice = Number(rate.quote.USD.price).toFixed(3);\n\t\ttokenPrice = String(tokenPrice) + \" \" + \"Usdt\";\n\n\t\tlet blockhain = \"\";\n\t\tif (rate.platform) {\n\t\t\tblockhain = rate.platform.name;\n\t\t} else {\n\t\t\tblockhain = rate.name;\n\t\t}\n\t\tlet percentChange = Number(rate.quote.USD.percent_change_24h).toFixed(2);\n\t\tpercentChange = String(percentChange) + \" \" + \"%\";\n\n\t\treturn {\n\t\t\tinfo: rate,\n\t\t\tcurrency: rate.name,\n\t\t\tvalue: tokenPrice,\n\t\t\tblockhain: blockhain,\n\t\t\tdayChange: percentChange,\n\t\t};\n\t});\n\n\treturn rates;\n};\n\nmodule.exports.getExchangeRatesBySlugs = getExchangeRatesBySlugs;\n\nconst getAllSlugsRequest = async () => {\n\tconst client = new CoinMarketCap(constants.COIN_MARKET_CAP_API_KEY);\n\tconst res = await client.getTickers({ limit: 5000 });\n\t// струпи -> пасхалочка ( ОЧКА )\n\tallSlugsCurr = Object.values(res.data).map((slug) => {\n\t\treturn {\n\t\t\tslug: slug.symbol,\n\t\t};\n\t});\n\n\treturn allSlugsCurr;\n};\n\nmodule.exports.getAllSlugsRequest = getAllSlugsRequest;\n\nconst getAllSlugs = () => allSlugsCurr;\nmodule.exports.getAllSlugs = getAllSlugs;\n\nconst getExchangeRateBySlug = async (slug) => {\n\tconst client = new CoinMarketCap(constants.COIN_MARKET_CAP_API_KEY);\n\tconst currencySlug = slug.toUpperCase();\n\tconst res = await client.getQuotes({ symbol: currencySlug });\n\tconst price = Number(res.data[currencySlug].quote.USD.price).toFixed(3);\n\treturn price;\n};\nmodule.exports.getExchangeRateBySlug = getExchangeRateBySlug;\n"],"mappings":"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"}